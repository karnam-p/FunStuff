<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signal Representation Explorer</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .concept-explanation {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin: 30px auto;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .concept-explanation h2 {
            color: #00d2ff;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .representations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .representation {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s ease, background 0.3s ease;
        }
        
        .representation:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }
        
        .representation h3 {
            color: #3a7bd5;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
        }
        
        .representation h3 i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .math-formula {
            font-family: 'Cambria Math', serif;
            font-size: 1.4rem;
            text-align: center;
            margin: 15px 0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .math-formula span {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            display: inline-block;
        }
        
        .visualization-area {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 40px;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
        }
        
        .control-group label {
            margin-bottom: 10px;
            font-weight: 500;
            color: #00d2ff;
        }
        
        input[type="range"], select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1rem;
        }
        
        input[type="range"] {
            height: 8px;
            padding: 0;
            background: rgba(255,255,255,0.1);
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #00d2ff;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 210, 255, 0.5);
        }
        
        .value-display {
            font-weight: bold;
            margin-top: 5px;
            font-size: 1.1rem;
            text-align: center;
            background: rgba(0,0,0,0.3);
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        .plots-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
        }
        
        .plot-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            height: 500px;
        }
        
        .plot-title {
            text-align: center;
            margin-bottom: 20px;
            color: #3a7bd5;
            font-size: 1.4rem;
        }
        
        .plot {
            height: 400px;
            width: 100%;
        }
        
        .current-point-info {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .current-point-info h2 {
            color: #00d2ff;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .point-representations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .point-rep {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .point-rep h3 {
            color: #3a7bd5;
            margin-bottom: 15px;
        }
        
        .point-value {
            font-family: 'Cambria Math', serif;
            font-size: 1.6rem;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .calculation-steps {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .step {
            margin-bottom: 15px;
            padding: 10px;
            border-left: 3px solid #00d2ff;
            background: rgba(0, 210, 255, 0.1);
        }
        
        .step h4 {
            color: #00d2ff;
            margin-bottom: 8px;
        }
        
        .highlight {
            background: rgba(0, 210, 255, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .angle-calculation {
            background: rgba(58, 123, 213, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.95rem;
        }
        
        .euler-equation {
            text-align: center;
            font-size: 1.5rem;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            font-family: 'Cambria Math', serif;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .representations, .point-representations, .plots-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .plot {
                height: 300px;
            }
            
            .plot-container {
                height: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Signal Representation Explorer</h1>
            <p class="subtitle">Visualize sine, cosine, and complex exponential representations of signals</p>
        </header>
        
        <div class="concept-explanation">
            <h2>Understanding Signal Representations</h2>
            <div class="euler-equation">
                e<sup>jŒ∏</sup> = cos(Œ∏) + j¬∑sin(Œ∏)
            </div>
            <p>This fundamental relationship (Euler's formula) connects trigonometric functions with complex exponentials.</p>
            
            <div class="representations">
                <div class="representation">
                    <h3><i>üìê</i> Trigonometric Form</h3>
                    <div class="math-formula">
                        <span id="trigFormula">A¬∑sin(œât + œÜ)</span>
                    </div>
                    <p>Sine and cosine functions represent periodic signals with amplitude and phase shift.</p>
                </div>
                
                <div class="representation">
                    <h3><i>‚ö°</i> Exponential Form</h3>
                    <div class="math-formula">
                        <span>A¬∑e<sup>j(œât + œÜ)</sup></span>
                    </div>
                    <p>Complex exponentials provide a compact representation using Euler's formula.</p>
                </div>
                
                <div class="representation">
                    <h3><i>üîÑ</i> Complex Form</h3>
                    <div class="math-formula">
                        <span>a + jb</span>
                    </div>
                    <p>Signals as complex numbers with real and imaginary components.</p>
                </div>
                
                <div class="representation">
                    <h3><i>‚≠ï</i> Polar Form</h3>
                    <div class="math-formula">
                        <span>A‚à†Œ∏</span>
                    </div>
                    <p>Magnitude and phase angle representation, showing the vector nature of signals.</p>
                    <div class="angle-calculation">
                        <strong>Angle Calculation:</strong>
                        <p>Œ∏ = atan2(Im, Re) = tan‚Åª¬π(b/a)</p>
                        <p>Accounts for the quadrant of the complex number.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="visualization-area">
            <div class="controls">
                <div class="control-group">
                    <label for="signalType">Signal Type</label>
                    <select id="signalType">
                        <option value="sine">Sine Wave</option>
                        <option value="cosine">Cosine Wave</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="amplitude">Amplitude (A): <span id="ampValue">1.0</span></label>
                    <input type="range" id="amplitude" min="0.5" max="3" step="0.1" value="1">
                </div>
                
                <div class="control-group">
                    <label for="frequency">Frequency (œâ): <span id="freqValue">1.0</span> rad/s</label>
                    <input type="range" id="frequency" min="0.2" max="3" step="0.1" value="1">
                </div>
                
                <div class="control-group">
                    <label for="phase">Phase Shift (œÜ): <span id="phaseValue">0.0</span>¬∞</label>
                    <input type="range" id="phase" min="0" max="360" step="5" value="0">
                </div>
            </div>
            
            <div class="plots-container">
                <div class="plot-container">
                    <h2 class="plot-title" id="waveTitle">Sine Wave Representation</h2>
                    <div id="wavePlot" class="plot"></div>
                </div>
                
                <div class="plot-container">
                    <h2 class="plot-title">Complex Exponential (e<sup>jŒ∏</sup>)</h2>
                    <div id="exponentialPlot" class="plot"></div>
                </div>
            </div>
            
            <div class="plots-container">
                <div class="plot-container">
                    <h2 class="plot-title">Phasor Diagram</h2>
                    <div id="phasorPlot" class="plot"></div>
                </div>
                
                <div class="plot-container">
                    <h2 class="plot-title">Component Comparison</h2>
                    <div id="componentPlot" class="plot"></div>
                </div>
            </div>
            
            <div class="current-point-info">
                <h2>Point Analysis at Selected Position</h2>
                <p class="subtitle">Hover over the wave to see how the selected point is represented in different forms</p>
                
                <div class="point-representations">
                    <div class="point-rep">
                        <h3>Trigonometric Form</h3>
                        <div id="trigValue" class="point-value">A¬∑sin(œât + œÜ)</div>
                    </div>
                    
                    <div class="point-rep">
                        <h3>Exponential Form</h3>
                        <div id="expValue" class="point-value">A¬∑e<sup>jŒ∏</sup></div>
                    </div>
                    
                    <div class="point-rep">
                        <h3>Complex Form</h3>
                        <div id="complexValue" class="point-value">a + jb</div>
                    </div>
                    
                    <div class="point-rep">
                        <h3>Polar Form</h3>
                        <div id="polarValue" class="point-value">A‚à†Œ∏¬∞</div>
                    </div>
                </div>
                
                <div class="calculation-steps">
                    <h3>Calculation Steps</h3>
                    <div class="step">
                        <h4>Step 1: Calculate Angle (Œ∏)</h4>
                        <p>Œ∏ = œât + œÜ = <span id="thetaCalc">0</span> radians</p>
                    </div>
                    
                    <div class="step">
                        <h4>Step 2: Compute Trigonometric Form</h4>
                        <p id="trigCalcText">y = A ¬∑ sin(Œ∏) = <span id="trigCalc">0</span></p>
                    </div>
                    
                    <div class="step">
                        <h4>Step 3: Compute Complex Form</h4>
                        <p>Real part (a) = A ¬∑ cos(Œ∏) = <span id="realCalc">0</span></p>
                        <p>Imaginary part (b) = A ¬∑ sin(Œ∏) = <span id="imagCalc">0</span></p>
                    </div>
                    
                    <div class="step">
                        <h4>Step 4: Compute Exponential Form</h4>
                        <p>A ¬∑ e<sup>jŒ∏</sup> = A ¬∑ (cos(Œ∏) + j¬∑sin(Œ∏)) = <span id="expCalc">0</span></p>
                    </div>
                    
                    <div class="step">
                        <h4>Step 5: Compute Polar Form</h4>
                        <p>Magnitude (r) = A = <span id="magCalc">0</span></p>
                        <p>Angle (Œ∏) = atan2(Im, Re) = tan‚Åª¬π(b/a) = <span id="angleCalc">0</span>¬∞</p>
                        <div class="angle-calculation">
                            <p><strong>Detailed Angle Calculation:</strong></p>
                            <p id="angleDetails">atan2(0, 0) = 0 radians = 0¬∞</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Signal Representation Explorer | Demonstrating the equivalence of sine, cosine, and complex exponential forms</p>
            <p>Hover over the wave to explore how each point can be represented in multiple equivalent forms</p>
        </footer>
    </div>
    
    <script>
        // Initialize with default values
        let amplitude = 1.0;
        let frequency = 1.0;
        let phase = 0.0;
        let signalType = "sine";
        let hoverX = 0;
        let hoverY = 0;
        let hoverTime = 0;
        
        // DOM elements
        const signalTypeSelect = document.getElementById('signalType');
        const ampSlider = document.getElementById('amplitude');
        const freqSlider = document.getElementById('frequency');
        const phaseSlider = document.getElementById('phase');
        const ampValue = document.getElementById('ampValue');
        const freqValue = document.getElementById('freqValue');
        const phaseValue = document.getElementById('phaseValue');
        const waveTitle = document.getElementById('waveTitle');
        const trigFormula = document.getElementById('trigFormula');
        const trigCalcText = document.getElementById('trigCalcText');
        
        // Representation displays
        const trigValue = document.getElementById('trigValue');
        const expValue = document.getElementById('expValue');
        const complexValue = document.getElementById('complexValue');
        const polarValue = document.getElementById('polarValue');
        const angleCalcDetails = document.getElementById('angleDetails');
        
        // Calculation elements
        const thetaCalc = document.getElementById('thetaCalc');
        const trigCalc = document.getElementById('trigCalc');
        const realCalc = document.getElementById('realCalc');
        const imagCalc = document.getElementById('imagCalc');
        const expCalc = document.getElementById('expCalc');
        const magCalc = document.getElementById('magCalc');
        const angleCalc = document.getElementById('angleCalc');
        
        // Initialize the plots
        function initPlots() {
            createWavePlot();
            createPhasorPlot();
            createExponentialPlot();
            createComponentPlot();
        }
        
        // Create wave plot (sine or cosine)
        function createWavePlot() {
            // Generate data
            const time = [];
            const values = [];
            const numPoints = 200;
            const maxTime = 4 * Math.PI;
            
            for (let i = 0; i <= numPoints; i++) {
                const t = (i / numPoints) * maxTime;
                time.push(t);
                
                if (signalType === "sine") {
                    values.push(amplitude * Math.sin(frequency * t + phase * Math.PI/180));
                } else {
                    values.push(amplitude * Math.cos(frequency * t + phase * Math.PI/180));
                }
            }
            
            // Set titles and formulas
            if (signalType === "sine") {
                waveTitle.textContent = "Sine Wave Representation";
                trigFormula.textContent = "A¬∑sin(œât + œÜ)";
                trigCalcText.innerHTML = "y = A ¬∑ sin(Œ∏) =";
            } else {
                waveTitle.textContent = "Cosine Wave Representation";
                trigFormula.textContent = "A¬∑cos(œât + œÜ)";
                trigCalcText.innerHTML = "y = A ¬∑ cos(Œ∏) =";
            }
            
            // Create trace for wave
            const trace = {
                x: time,
                y: values,
                mode: 'lines',
                line: {
                    color: '#00d2ff',
                    width: 3
                },
                name: signalType === "sine" ? 'Sine Wave' : 'Cosine Wave'
            };
            
            // Create hover point
            const hoverPoint = {
                x: [0],
                y: [0],
                mode: 'markers',
                marker: {
                    color: '#ff6b6b',
                    size: 12
                },
                name: 'Selected Point'
            };
            
            // Create vertical line at selected point
            const vline = {
                x: [0, 0],
                y: [-amplitude*1.5, amplitude*1.5],
                mode: 'lines',
                line: {
                    color: 'rgba(255, 107, 107, 0.5)',
                    width: 2,
                    dash: 'dash'
                },
                name: 'Time Line'
            };
            
            // Layout configuration
            const layout = {
                title: signalType === "sine" 
                    ? 'x(t) = A¬∑sin(œât + œÜ)' 
                    : 'x(t) = A¬∑cos(œât + œÜ)',
                titlefont: {
                    color: '#fff',
                    size: 18
                },
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                xaxis: {
                    title: 'Time (t)',
                    titlefont: {
                        color: '#fff'
                    },
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff'
                },
                yaxis: {
                    title: 'Amplitude',
                    titlefont: {
                        color: '#fff'
                    },
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff',
                    range: [-amplitude*1.5, amplitude*1.5]
                },
                hovermode: 'closest',
                showlegend: true,
                legend: {
                    font: {
                        color: '#fff'
                    }
                }
            };
            
            // Create the plot
            Plotly.newPlot('wavePlot', [trace, hoverPoint, vline], layout);
            
            // Add hover event
            document.getElementById('wavePlot').on('plotly_hover', function(data) {
                if (data.points && data.points[0]) {
                    hoverX = data.points[0].x;
                    hoverY = data.points[0].y;
                    hoverTime = hoverX;
                    updatePointRepresentations();
                    updatePlots();
                    
                    // Update hover point
                    Plotly.restyle('wavePlot', {
                        x: [[hoverX], [hoverX]],
                        y: [[hoverY], [-amplitude*1.5, amplitude*1.5]]
                    }, [1, 2]);
                }
            });
        }
        
        // Create phasor diagram
        function createPhasorPlot() {
            const theta = frequency * hoverTime + phase * Math.PI/180;
            const real = amplitude * Math.cos(theta);
            const imag = amplitude * Math.sin(theta);
            
            // Create circle trace
            const circle = {
                x: [],
                y: [],
                mode: 'lines',
                line: {
                    color: 'rgba(255, 255, 255, 0.2)',
                    width: 1
                },
                name: 'Unit Circle'
            };
            
            for (let i = 0; i <= 100; i++) {
                const angle = (i / 100) * 2 * Math.PI;
                circle.x.push(amplitude * Math.cos(angle));
                circle.y.push(amplitude * Math.sin(angle));
            }
            
            // Create real axis
            const realAxis = {
                x: [-amplitude*1.2, amplitude*1.2],
                y: [0, 0],
                mode: 'lines',
                line: {
                    color: 'rgba(255, 255, 255, 0.3)',
                    width: 1
                },
                name: 'Real Axis'
            };
            
            // Create imaginary axis
            const imagAxis = {
                x: [0, 0],
                y: [-amplitude*1.2, amplitude*1.2],
                mode: 'lines',
                line: {
                    color: 'rgba(255, 255, 255, 0.3)',
                    width: 1
                },
                name: 'Imaginary Axis'
            };
            
            // Create phasor vector
            const vector = {
                x: [0, real],
                y: [0, imag],
                mode: 'lines+markers',
                line: {
                    color: '#00d2ff',
                    width: 3
                },
                marker: {
                    color: '#ff6b6b',
                    size: 8
                },
                name: 'Phasor'
            };
            
            // Create projection lines
            const projReal = {
                x: [real, real],
                y: [0, imag],
                mode: 'lines',
                line: {
                    color: 'rgba(255, 107, 107, 0.5)',
                    width: 2,
                    dash: 'dash'
                },
                name: 'Real Projection'
            };
            
            const projImag = {
                x: [0, real],
                y: [imag, imag],
                mode: 'lines',
                line: {
                    color: 'rgba(255, 107, 107, 0.5)',
                    width: 2,
                    dash: 'dash'
                },
                name: 'Imaginary Projection'
            };
            
            // Create angle arc
            const arcPoints = 20;
            const arc = {
                x: [],
                y: [],
                mode: 'lines',
                line: {
                    color: '#3a7bd5',
                    width: 2
                },
                name: 'Angle Œ∏'
            };
            
            const arcRadius = amplitude * 0.3;
            for (let i = 0; i <= arcPoints; i++) {
                const angle = (i / arcPoints) * theta;
                arc.x.push(arcRadius * Math.cos(angle));
                arc.y.push(arcRadius * Math.sin(angle));
            }
            
            // Layout configuration
            const layout = {
                title: 'Phasor Diagram',
                titlefont: {
                    color: '#fff',
                    size: 18
                },
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                xaxis: {
                    title: 'Real Axis',
                    titlefont: {
                        color: '#fff'
                    },
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff',
                    range: [-amplitude*1.3, amplitude*1.3]
                },
                yaxis: {
                    title: 'Imaginary Axis',
                    titlefont: {
                        color: '#fff'
                    },
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff',
                    range: [-amplitude*1.3, amplitude*1.3],
                    scaleanchor: "x",
                    scaleratio: 1
                },
                showlegend: true,
                legend: {
                    font: {
                        color: '#fff'
                    }
                },
                annotations: [
                    {
                        x: real,
                        y: imag,
                        xref: 'x',
                        yref: 'y',
                        text: `(${real.toFixed(2)}, ${imag.toFixed(2)})`,
                        showarrow: true,
                        arrowhead: 2,
                        ax: 20,
                        ay: -40,
                        font: {
                            color: '#fff'
                        }
                    },
                    {
                        x: real/2,
                        y: imag/2,
                        xref: 'x',
                        yref: 'y',
                        text: `Œ∏ = ${(theta * 180/Math.PI).toFixed(1)}¬∞`,
                        showarrow: false,
                        font: {
                            color: '#00d2ff'
                        }
                    },
                    {
                        x: arcRadius * Math.cos(theta/2) * 1.2,
                        y: arcRadius * Math.sin(theta/2) * 1.2,
                        xref: 'x',
                        yref: 'y',
                        text: `Œ∏`,
                        showarrow: false,
                        font: {
                            color: '#3a7bd5',
                            size: 16
                        }
                    }
                ]
            };
            
            // Create the plot
            Plotly.newPlot('phasorPlot', [circle, realAxis, imagAxis, vector, projReal, projImag, arc], layout);
        }
        
        // Create complex exponential plot
        function createExponentialPlot() {
            const theta = frequency * hoverTime + phase * Math.PI/180;
            
            // Unit circle
            const circleX = [];
            const circleY = [];
            for (let i = 0; i <= 100; i++) {
                const angle = (i / 100) * 2 * Math.PI;
                circleX.push(Math.cos(angle));
                circleY.push(Math.sin(angle));
            }
            
            // Exponential vector
            const vectorX = [0, Math.cos(theta)];
            const vectorY = [0, Math.sin(theta)];
            
            // Sine and cosine components
            const cosVectorX = [0, Math.cos(theta)];
            const cosVectorY = [0, 0];
            
            const sinVectorX = [Math.cos(theta), Math.cos(theta)];
            const sinVectorY = [0, Math.sin(theta)];
            
            // Create traces
            const traces = [
                // Unit circle
                {
                    x: circleX,
                    y: circleY,
                    mode: 'lines',
                    line: {color: 'rgba(255,255,255,0.2)', width: 1},
                    name: 'Unit Circle'
                },
                // Exponential vector
                {
                    x: vectorX,
                    y: vectorY,
                    mode: 'lines+markers',
                    line: {color: '#00d2ff', width: 3},
                    marker: {color: '#ff6b6b', size: 8},
                    name: 'e<sup>jŒ∏</sup>'
                },
                // Real component (cosine)
                {
                    x: cosVectorX,
                    y: cosVectorY,
                    mode: 'lines',
                    line: {color: '#3a7bd5', width: 2, dash: 'dot'},
                    name: 'Real (cos Œ∏)'
                },
                // Imaginary component (sine)
                {
                    x: sinVectorX,
                    y: sinVectorY,
                    mode: 'lines',
                    line: {color: '#28a745', width: 2, dash: 'dot'},
                    name: 'Imag (sin Œ∏)'
                },
                // Angle arc
                {
                    x: [],
                    y: [],
                    mode: 'lines',
                    line: {color: '#ff6b6b', width: 2},
                    name: 'Angle Œ∏'
                }
            ];
            
            // Create angle arc
            const arcPoints = 20;
            const arcRadius = 0.3;
            for (let i = 0; i <= arcPoints; i++) {
                const angle = (i / arcPoints) * theta;
                traces[4].x.push(arcRadius * Math.cos(angle));
                traces[4].y.push(arcRadius * Math.sin(angle));
            }
            
            // Layout configuration
            const layout = {
                title: 'e<sup>jŒ∏</sup> = cos(Œ∏) + j¬∑sin(Œ∏)',
                titlefont: {color: '#fff', size: 18},
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                xaxis: {
                    title: 'Real (cos Œ∏)',
                    range: [-1.3, 1.3],
                    titlefont: {color: '#fff'},
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff'
                },
                yaxis: {
                    title: 'Imaginary (sin Œ∏)',
                    range: [-1.3, 1.3],
                    titlefont: {color: '#fff'},
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff',
                    scaleanchor: "x",
                    scaleratio: 1
                },
                showlegend: true,
                legend: {font: {color: '#fff'}},
                annotations: [
                    {
                        x: 0.5 * Math.cos(theta),
                        y: 0.5 * Math.sin(theta),
                        text: `Œ∏ = ${(theta * 180/Math.PI).toFixed(1)}¬∞`,
                        showarrow: false,
                        font: {color: '#fff', size: 14}
                    },
                    {
                        x: Math.cos(theta),
                        y: 0,
                        text: `cos Œ∏ = ${Math.cos(theta).toFixed(3)}`,
                        showarrow: true,
                        ax: 0,
                        ay: -30,
                        font: {color: '#3a7bd5'}
                    },
                    {
                        x: Math.cos(theta),
                        y: Math.sin(theta)/2,
                        text: `sin Œ∏ = ${Math.sin(theta).toFixed(3)}`,
                        showarrow: true,
                        ax: 40,
                        ay: 0,
                        font: {color: '#28a745'}
                    }
                ]
            };
            
            Plotly.newPlot('exponentialPlot', traces, layout);
        }
        
        // Create component comparison plot
        function createComponentPlot() {
            const time = [];
            const sineValues = [];
            const cosineValues = [];
            const numPoints = 200;
            const maxTime = 4 * Math.PI;
            const theta = frequency * hoverTime + phase * Math.PI/180;
            
            for (let i = 0; i <= numPoints; i++) {
                const t = (i / numPoints) * maxTime;
                time.push(t);
                sineValues.push(Math.sin(frequency * t + phase * Math.PI/180));
                cosineValues.push(Math.cos(frequency * t + phase * Math.PI/180));
            }
            
            // Current time indicator
            const vline = {
                x: [hoverTime, hoverTime],
                y: [-1.5, 1.5],
                mode: 'lines',
                line: {color: 'rgba(255,107,107,0.7)', width: 2},
                name: 'Current Time'
            };
            
            const traces = [
                {
                    x: time,
                    y: sineValues,
                    mode: 'lines',
                    line: {color: '#28a745', width: 2},
                    name: 'sin(œât + œÜ)'
                },
                {
                    x: time,
                    y: cosineValues,
                    mode: 'lines',
                    line: {color: '#3a7bd5', width: 2},
                    name: 'cos(œât + œÜ)'
                },
                vline,
                {
                    x: [hoverTime],
                    y: [Math.sin(theta)],
                    mode: 'markers',
                    marker: {color: '#28a745', size: 10},
                    name: 'sin(Œ∏)'
                },
                {
                    x: [hoverTime],
                    y: [Math.cos(theta)],
                    mode: 'markers',
                    marker: {color: '#3a7bd5', size: 10},
                    name: 'cos(Œ∏)'
                }
            ];
            
            const layout = {
                title: 'Sine and Cosine Components',
                titlefont: {color: '#fff', size: 18},
                plot_bgcolor: 'rgba(0,0,0,0.1)',
                paper_bgcolor: 'rgba(0,0,0,0)',
                xaxis: {
                    title: 'Time (t)',
                    titlefont: {color: '#fff'},
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff'
                },
                yaxis: {
                    title: 'Value',
                    titlefont: {color: '#fff'},
                    gridcolor: 'rgba(255,255,255,0.1)',
                    color: '#fff',
                    range: [-1.5, 1.5]
                },
                showlegend: true,
                legend: {font: {color: '#fff'}},
                annotations: [
                    {
                        x: hoverTime,
                        y: Math.sin(theta),
                        text: `sin(Œ∏) = ${Math.sin(theta).toFixed(3)}`,
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -30,
                        font: {color: '#28a745'}
                    },
                    {
                        x: hoverTime,
                        y: Math.cos(theta),
                        text: `cos(Œ∏) = ${Math.cos(theta).toFixed(3)}`,
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: 30,
                        font: {color: '#3a7bd5'}
                    }
                ]
            };
            
            Plotly.newPlot('componentPlot', traces, layout);
        }
        
        // Update all plots
        function updatePlots() {
            createWavePlot();
            createPhasorPlot();
            createExponentialPlot();
            createComponentPlot();
        }
        
        // Update representations based on current hover point
        function updatePointRepresentations() {
            const theta = frequency * hoverTime + phase * Math.PI/180;
            const angleDeg = (theta * 180 / Math.PI) % 360;
            const real = amplitude * Math.cos(theta);
            const imag = amplitude * Math.sin(theta);
            
            // Calculate angle using atan2 for demonstration
            const calculatedAngle = Math.atan2(imag, real);
            const calculatedAngleDeg = calculatedAngle * 180 / Math.PI;
            
            // Trigonometric form
            let trigText, trigValueText;
            if (signalType === "sine") {
                trigText = `${amplitude.toFixed(1)}¬∑sin(${(theta).toFixed(2)})`;
                trigValueText = hoverY.toFixed(3);
            } else {
                trigText = `${amplitude.toFixed(1)}¬∑cos(${(theta).toFixed(2)})`;
                trigValueText = hoverY.toFixed(3);
            }
            
            trigValue.innerHTML = `
                <span>${trigText}</span>
                <div style="font-size: 1.4rem; margin-top: 10px; color: #00d2ff">= ${trigValueText}</div>
            `;
            
            // Exponential form
            expValue.innerHTML = `
                <span>${amplitude.toFixed(1)}¬∑e<sup>j${theta.toFixed(2)}</sup></span>
                <div style="font-size: 1.4rem; margin-top: 10px; color: #00d2ff">= ${real.toFixed(3)} + j¬∑${imag.toFixed(3)}</div>
            `;
            
            // Complex form
            complexValue.innerHTML = `
                <span>${real.toFixed(3)} + j¬∑${imag.toFixed(3)}</span>
                <div style="font-size: 1.4rem; margin-top: 10px; color: #00d2ff">|z| = ${amplitude.toFixed(3)}</div>
            `;
            
            // Polar form
            polarValue.innerHTML = `
                <span>${amplitude.toFixed(1)}‚à†${angleDeg.toFixed(1)}¬∞</span>
                <div style="font-size: 1.4rem; margin-top: 10px; color: #00d2ff">x = ${real.toFixed(3)}</div>
                <div style="font-size: 1.4rem; color: #00d2ff">y = ${imag.toFixed(3)}</div>
            `;
            
            // Update calculations
            thetaCalc.textContent = theta.toFixed(4);
            trigCalc.textContent = trigValueText;
            realCalc.textContent = real.toFixed(4);
            imagCalc.textContent = imag.toFixed(4);
            expCalc.textContent = `${real.toFixed(4)} + j${imag.toFixed(4)}`;
            magCalc.textContent = amplitude.toFixed(4);
            angleCalc.textContent = angleDeg.toFixed(1);
            
            // Update angle calculation details
            angleCalcDetails.innerHTML = `
                atan2(Im, Re) = atan2(${imag.toFixed(4)}, ${real.toFixed(4)})<br>
                = ${calculatedAngle.toFixed(4)} radians<br>
                = ${calculatedAngleDeg.toFixed(1)}¬∞
            `;
        }
        
        // Update plot when controls change
        function updatePlot() {
            signalType = signalTypeSelect.value;
            amplitude = parseFloat(ampSlider.value);
            frequency = parseFloat(freqSlider.value);
            phase = parseFloat(phaseSlider.value);
            
            ampValue.textContent = amplitude.toFixed(1);
            freqValue.textContent = frequency.toFixed(1);
            phaseValue.textContent = phase.toFixed(1);
            
            updatePlots();
            updatePointRepresentations();
        }
        
        // Initialize event listeners
        signalTypeSelect.addEventListener('change', updatePlot);
        ampSlider.addEventListener('input', updatePlot);
        freqSlider.addEventListener('input', updatePlot);
        phaseSlider.addEventListener('input', updatePlot);
        
        // Initialize the plot on page load
        window.addEventListener('load', function() {
            initPlots();
            updatePlot();
        });
    </script>
</body>
</html>